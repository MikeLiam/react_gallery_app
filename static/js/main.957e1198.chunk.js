(this["webpackJsonpreact_gallery_app-v1"]=this["webpackJsonpreact_gallery_app-v1"]||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/moto.d8b74ad1.png"},33:function(e,t,a){e.exports=a(61)},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),c=a.n(o),l=a(8),i=a(9),s=a(11),u=a(10),m=a(1),h=a(17),d=a(29),p=a.n(d),f="431e6bc1a79a3b98d436a8714fe19989",g=r.a.createContext(),v=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchContainer:[{topic:"yamaha tracer",photos:[]},{topic:"kawasaki versys",photos:[]},{topic:"bmw gs",photos:[]},{topic:"ducati multistrada",photos:[]}],loading:!1,noResults:!1},e.handleLoading=function(t){e.setState({loading:t})},e.performSearch=function(t){var a=e.state.searchContainer.findIndex((function(e){return e.topic.split(" ").join("")===t.split(" ").join("")}));(-1===a||-1!==a&&0===e.state.searchContainer[a].photos.length)&&e.setState({loading:!0},(function(){p.a.get("https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=".concat(f,"&tags=").concat(t,"&per_page=24&format=json&nojsoncallback=1")).then((function(n){var r=n.data.photos.photo;r.length>0?-1!==a?e.setState((function(e){var t=Object(h.a)(e.searchContainer),n=e.searchContainer[a];return n.photos=r,t.splice(a,1,n),{searchContainer:t,loading:!1,noResults:!1}})):e.setState((function(e){var a={};return a.photos=r,t&&(a.topic=t),{searchContainer:[].concat(Object(h.a)(e.searchContainer),[a]),loading:!1,noResults:!1}})):e.setState((function(e){return{loading:!1,noResults:!0}}))})).catch((function(e){return console.log("Error fetching and parsing data",e)}))}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(g.Provider,{value:{searchContainer:this.state.searchContainer,loading:this.state.loading,noResults:this.state.noResults,actions:{onSearch:this.performSearch,loading:this.handleLoading}}}," ",this.props.children," ")}}]),a}(n.Component),E=g.Consumer,b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchText:""},e.onSearchChange=function(t){e.setState({searchText:t.target.value})},e.handleSubmit=function(t,a){var n=e.props.history;t.preventDefault();var r=e.query.value;a(r);var o="/gallery/".concat(r.split(" ").join(""));n.push(o),t.currentTarget.reset()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(E,null,(function(t){var a=t.actions;return r.a.createElement("form",{className:"search-form",onSubmit:function(t){return e.handleSubmit(t,a.onSearch)}},r.a.createElement("input",{type:"search",onChange:e.onSearchChange,name:"search",ref:function(t){return e.query=t},placeholder:"Search",required:!0}),r.a.createElement("button",{type:"submit",id:"submit",className:"search-button"},r.a.createElement("svg",{fill:"#fff",height:"24",viewBox:"0 0 23 23",width:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))))}))}}]),a}(n.Component),y=Object(m.g)(b),w=a(7),S=function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"main-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(w.b,{to:"/gallery/yamahatracer"},"Yamaha Tracer")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/gallery/kawasakiversys"},"Kawasaki Versys")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/gallery/bmwgs"},"BMW",r.a.createElement("br",null)," GS")),r.a.createElement("li",null,r.a.createElement(w.b,{to:"/gallery/ducatimultistrada"},"Ducati Multistrada")))))},C=a(31),N=function(e){var t,a=e.farm,n=e.server,o=e.id,c=e.secret,l=e.handlePhoto,i=0,s=0,u=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.boundingClientRect.y,a=e.intersectionRatio,n=e.isIntersecting,r=e.target;t<i&&n?r.className=a>s?"slide-in active":"slide-in vanish-up":t>i&&n&&(r.className=a<s?"slide-in":"slide-in active"),i=t,s=a}))}),{threshold:(t=5,Array(t+1).fill(0).map((function(e,a){return a/t||0})))});return r.a.createElement(C.a,{as:"li",id:o,className:"slide-in",onChange:function(e,t){return u.observe(t.target)}},r.a.createElement("img",{src:"https://farm".concat(a,".staticflickr.com/").concat(n,"/").concat(o,"_").concat(c,".jpg"),alt:"",onClick:function(e){return l(e.target,!0,"open",o)}}))},j=function(e){return r.a.createElement("div",{className:"cartel"},r.a.createElement("div",{className:"not-found dead-end"},r.a.createElement("div",{className:"bar"})),r.a.createElement("h3",null,"You hit a Dead End"))},k=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"photo-container"},r.a.createElement("h2",null,"Results"),r.a.createElement("ul",null,r.a.createElement(E,null,(function(t){var a,n,o=t.searchContainer,c=t.noResults,l=e.topic;return-1!==(n=o.findIndex((function(e){return e.topic.split(" ").join("")===l.split(" ").join("")})))?a=o[n].photos.map((function(t){return r.a.createElement(N,{farm:t.farm,secret:t.secret,server:t.server,id:t.id,key:t.id,handlePhoto:e.handlePhoto})})):c?r.a.createElement(j,null):a})))))},x=function(e){return r.a.createElement("div",{className:"e-404"},r.a.createElement("div",{className:"sign inside"},r.a.createElement("h3",null,"Exit 404"),r.a.createElement("p",null,"Road to nowhere found")))},O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleButtons=function(t){if("BUTTON"===t.target.tagName||"STRONG"===t.target.tagName||"I"===t.target.tagName){var a,n=t.target.closest("button"),r=null,o=!0,c=e.props.id;"modal-prev-btn"===n.id?a="prev":"modal-next-btn"===n.id?a="next":(a="close",r=n.closest("div.modal-container"),o=!1,c=null),e.props.handleImage(r,o,a,c)}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-container",onClick:function(t){return e.handleButtons(t)}},r.a.createElement("div",{className:"modal",style:{backgroundImage:"url(".concat(this.props.src,")")}},r.a.createElement("button",{type:"button",id:"modal-close-btn",className:"modal-close-btn"},r.a.createElement("strong",null,"X")),r.a.createElement("button",{type:"button",id:"modal-prev-btn",className:"modal-arrow-btn prev"},r.a.createElement("i",{className:"modal-arrow left"})),r.a.createElement("button",{type:"button",id:"modal-next-btn",className:"modal-arrow-btn next"},r.a.createElement("i",{className:"modal-arrow right"}))))}}]),a}(n.Component),I=a(32),R=a.n(I),_=function(e){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{className:"moto",src:R.a,alt:"moto"}),r.a.createElement("h2",null,"Loading..."))},B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleImage=function(t,a,n,r){var o;if("open"!==n&&"close"!==n){var c,l=document.getElementById("".concat(r));"prev"===n?null===(c=l.previousElementSibling)&&(c=l.parentNode.lastElementChild):"next"===n&&null===(c=l.nextElementSibling)&&(c=l.parentNode.firstElementChild),o=c.querySelector("img").src,r=c.id}else"open"===n&&(o=t.src);e.setState({frontImage:a,image:a?o:"",imageId:a?r:""})},e.state={frontImage:!1,image:"",imageId:"",listenHistory:!1},e}return Object(i.a)(a,[{key:"updateSearchUrl",value:function(){if(this.props.history.length>2){var e=this.props.location.pathname.split("/");if(1===e.findIndex((function(e){return"gallery"===e}))){var t=e[2];this.context.actions.onSearch(t)}}}},{key:"componentDidMount",value:function(){var e=this;this.context.searchContainer.forEach((function(t){return e.context.actions.onSearch(t.topic)})),this.state.listenHistory||(this.updateSearchUrl(),this.setState({listenHistory:!0})),this.props.history.listen((function(t,a){e.updateSearchUrl()}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(S,null),this.context.loading?r.a.createElement(_,null):r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/gallery/yamahatracer"})}}),r.a.createElement(m.b,{path:"/gallery/:topic",render:function(t){return r.a.createElement(k,{topic:t.match.params.topic,handlePhoto:e.handleImage})}}),r.a.createElement(m.b,{component:x})),this.state.frontImage&&r.a.createElement(O,{src:this.state.image,id:this.state.imageId,handleImage:this.handleImage}))}}]),a}(n.Component);B.contextType=g;var T=Object(m.g)(B);a(60),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(w.a,{basename:"/react_gallery_app"},console.log("/react_gallery_app"),r.a.createElement(v,null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.957e1198.chunk.js.map